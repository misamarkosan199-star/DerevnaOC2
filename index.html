<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0e0e11">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Derevna24/2</title>
    <style>
        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
            background: #1C2833;
            color: #ECF0F1;
            height: 100vh;
            overflow: hidden;
            position: fixed;
            width: 100%;
        }
        
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            overflow-y: auto;
        }
        
        .screen.active {
            opacity: 1;
            pointer-events: all;
        }
        
        /* –¶–≤–µ—Ç–∞ */
        .bg-primary { background: #2E86C1; }
        .bg-secondary { background: #27AE60; }
        .bg-accent { background: #E74C3C; }
        .bg-dark { background: #1C2833; }
        .bg-card { background: #2C3E50; }
        .bg-darker { background: #17202A; }
        .bg-admin { background: #9B59B6; }
        .bg-success { background: #2ECC71; }
        .bg-warning { background: #F39C12; }
        .bg-danger { background: #E74C3C; }
        .bg-info { background: #3498DB; }
        
        /* –¢–µ–∫—Å—Ç */
        .text-white { color: #ECF0F1; }
        .text-gray { color: #BDC3C7; }
        .text-green { color: #2ECC71; }
        .text-red { color: #E74C3C; }
        .text-yellow { color: #F39C12; }
        .text-purple { color: #9B59B6; }
        
        /* –®—Ä–∏—Ñ—Ç—ã */
        .title {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .subtitle {
            font-size: 18px;
            margin-bottom: 30px;
            text-align: center;
            color: #BDC3C7;
        }
        
        .header {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .body-text {
            font-size: 16px;
            line-height: 1.5;
        }
        
        .small-text {
            font-size: 12px;
            color: #BDC3C7;
        }
        
        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .card {
            background: #2C3E50;
            border-radius: 15px;
            padding: 25px;
            width: 100%;
            max-width: 400px;
            border: 2px solid #2E86C1;
            margin: 20px 0;
        }
        
        .news-card {
            background: #2C3E50;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #2E86C1;
        }
        
        .news-card.admin {
            border-left: 4px solid #9B59B6;
            background: #3a2d42;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            display: block;
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            color: white;
            margin: 10px 0;
            cursor: pointer;
            transition: transform 0.2s, opacity 0.2s;
            text-align: center;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            opacity: 0.9;
        }
        
        .btn:active {
            transform: translateY(0);
            opacity: 0.8;
        }
        
        .btn-small {
            padding: 8px 15px;
            font-size: 14px;
            width: auto;
            margin: 5px;
        }
        
        /* –ü–æ–ª—è –≤–≤–æ–¥–∞ */
        .input-group {
            margin-bottom: 20px;
            width: 100%;
        }
        
        .input-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .input-field {
            width: 100%;
            padding: 15px;
            background: #34495E;
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 16px;
        }
        
        textarea.input-field {
            min-height: 150px;
            resize: vertical;
            font-family: inherit;
        }
        
        .input-field:focus {
            outline: none;
            box-shadow: 0 0 0 2px #2E86C1;
        }
        
        /* –í–∏–¥–µ–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        #video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #splash-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* –ó–∞–≥—Ä—É–∑–∫–∞ */
        #loading {
            position: absolute;
            bottom: 50px;
            color: white;
            font-size: 18px;
            z-index: 1001;
        }
        
        /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background: #17202A;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        /* –°–ø–∏—Å–æ–∫ */
        .list {
            width: 100%;
            max-width: 400px;
        }
        
        .list-item {
            background: #2C3E50;
            border-radius: 10px;
            padding: 15px;
            margin: 8px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ */
        .scroll-container {
            width: 100%;
            height: calc(100vh - 60px);
            overflow-y: auto;
            padding: 80px 20px 20px;
        }
        
        /* –ù–æ–≤–æ—Å—Ç–∏ */
        .news-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .news-title {
            font-weight: bold;
            font-size: 18px;
            color: #ECF0F1;
        }
        
        .news-date {
            font-size: 12px;
            color: #BDC3C7;
        }
        
        .news-content {
            margin: 10px 0;
            line-height: 1.6;
        }
        
        .news-author {
            font-size: 12px;
            color: #2E86C1;
            margin-top: 10px;
        }
        
        .news-author.admin {
            color: #9B59B6;
        }
        
        .news-tag {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            margin-right: 5px;
            margin-top: 5px;
        }
        
        .tag-update { background: #2ECC71; color: white; }
        .tag-event { background: #F39C12; color: white; }
        .tag-important { background: #E74C3C; color: white; }
        .tag-job { background: #3498DB; color: white; }
        .tag-system { background: #9B59B6; color: white; }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .slide-up {
            animation: slideUp 0.5s ease-out;
        }
        
        /* –ë–µ–π–¥–∂–∏ */
        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            margin-left: 5px;
        }
        
        .badge-admin {
            background: #9B59B6;
            color: white;
        }
        
        .badge-user {
            background: #2E86C1;
            color: white;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 480px) {
            .card {
                padding: 20px;
            }
            
            .title {
                font-size: 28px;
            }
            
            .header {
                font-size: 22px;
            }
        }
        
        /* –•–æ–≤–µ—Ä—ã –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞ */
        @media (hover: hover) {
            .btn:hover {
                transform: translateY(-2px);
            }
        }
        
        /* –¢–∞—á –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        .btn {
            touch-action: manipulation;
        }
    </style>
</head>
<body>
    <!-- –í–∏–¥–µ–æ –∑–∞—Å—Ç–∞–≤–∫–∞ -->
    <div id="video-container">
        <video id="splash-video" autoplay muted playsinline>
            <source src="Video/splash.mp4" type="video/mp4">
        </video>
        <audio id="splash-audio" loop>
            <source src="Video/sound.mp3" type="audio/mpeg">
        </audio>
        <div id="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã...</div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ -->
    <div id="activation-screen" class="screen bg-dark">
        <div class="card slide-up">
            <h1 class="title text-white">DEREVNA</h1>
            <p class="subtitle">24/2</p>
            
            <div class="body-text text-center" style="margin-bottom: 30px;">
                <p>–°–ò–°–¢–ï–ú–ê –ê–ö–¢–ò–í–ê–¶–ò–ò</p>
            </div>
            
            <button class="btn bg-primary" onclick="activateSystem()">
                ‚ö° –ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨
            </button>
            
            <div style="margin-top: 30px; text-align: center;">
                <p class="small-text">¬© 2024 Derevna Corporation</p>
                <p class="small-text">–í–µ—Ä—Å–∏—è 2.0</p>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div id="auth-screen" class="screen bg-dark">
        <div class="card slide-up">
            <h2 class="header text-white">–í–•–û–î –í –°–ò–°–¢–ï–ú–£</h2>
            
            <div class="input-group">
                <label class="input-label text-white">–õ–æ–≥–∏–Ω:</label>
                <input type="text" id="login-input" class="input-field" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω">
            </div>
            
            <div class="input-group">
                <label class="input-label text-white">–ü–∞—Ä–æ–ª—å:</label>
                <input type="password" id="password-input" class="input-field" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
            </div>
            
            <button class="btn bg-primary" onclick="login()">
                –í–û–ô–¢–ò
            </button>
            
            <button class="btn bg-secondary" onclick="showScreen('register-screen')">
                –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø
            </button>
            
            <button class="btn bg-gray" onclick="showScreen('activation-screen')" style="margin-top: 20px;">
                ‚Üê –ù–ê–ó–ê–î
            </button>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div id="register-screen" class="screen bg-dark">
        <div class="card slide-up">
            <h2 class="header text-white">–†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø</h2>
            
            <div class="input-group">
                <label class="input-label text-white">–õ–æ–≥–∏–Ω:</label>
                <input type="text" id="reg-login-input" class="input-field" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ª–æ–≥–∏–Ω">
            </div>
            
            <div class="input-group">
                <label class="input-label text-white">–ü–∞—Ä–æ–ª—å:</label>
                <input type="password" id="reg-password-input" class="input-field" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å">
            </div>
            
            <button class="btn bg-success" onclick="register()">
                –°–û–ó–î–ê–¢–¨ –ê–ö–ö–ê–£–ù–¢
            </button>
            
            <button class="btn bg-danger" onclick="showScreen('auth-screen')">
                ‚Üê –ù–ê–ó–ê–î
            </button>
        </div>
    </div>

    <!-- –í—ã–±–æ—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ -->
    <div id="character-screen" class="screen bg-dark">
        <div class="top-bar">
            <span class="title" style="font-size: 20px;">–í–´–ë–û–† –ü–ï–†–°–û–ù–ê–ñ–ê</span>
            <button class="btn bg-danger btn-small" onclick="logout()">
                ‚Üê –í–´–ô–¢–ò
            </button>
        </div>
        
        <div class="scroll-container">
            <div id="characters-list" class="list">
                <!-- –°–ø–∏—Å–æ–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
            </div>
            
            <button class="btn bg-success" onclick="showScreen('create-character-screen')" style="margin-top: 20px;">
                + –°–û–ó–î–ê–¢–¨ –ù–û–í–û–ì–û –ü–ï–†–°–û–ù–ê–ñ–ê
            </button>
            
            <button class="btn bg-warning" onclick="skipCharacter()" style="margin-top: 10px;">
                –ü–†–û–ü–£–°–¢–ò–¢–¨
            </button>
        </div>
    </div>

    <!-- –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ -->
    <div id="create-character-screen" class="screen bg-dark">
        <div class="top-bar">
            <span class="title" style="font-size: 20px;">–°–û–ó–î–ê–ù–ò–ï –ü–ï–†–°–û–ù–ê–ñ–ê</span>
            <button class="btn bg-danger btn-small" onclick="showScreen('character-screen')">
                ‚Üê –ù–ê–ó–ê–î
            </button>
        </div>
        
        <div class="scroll-container">
            <div class="card">
                <div class="input-group">
                    <label class="input-label text-white">–ò–º—è:</label>
                    <input type="text" id="char-firstname" class="input-field" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
                </div>
                
                <div class="input-group">
                    <label class="input-label text-white">–§–∞–º–∏–ª–∏—è:</label>
                    <input type="text" id="char-lastname" class="input-field" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é">
                </div>
                
                <div class="input-group">
                    <label class="input-label text-white">–í–æ–∑—Ä–∞—Å—Ç:</label>
                    <input type="number" id="char-age" class="input-field" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç" min="1" max="120">
                </div>
                
                <div class="input-group">
                    <label class="input-label text-white">–ì–æ—Ä–æ–¥:</label>
                    <input type="text" id="char-city" class="input-field" placeholder="–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥">
                </div>
                
                <div class="input-group">
                    <label class="input-label text-white">–°—Ç—Ä–∞–Ω–∞:</label>
                    <input type="text" id="char-country" class="input-field" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É">
                </div>
                
                <button class="btn bg-success" onclick="createCharacter()">
                    –°–û–ó–î–ê–¢–¨ –ü–ï–†–°–û–ù–ê–ñ–ê
                </button>
                
                <button class="btn bg-warning" onclick="skipCharacter()">
                    –ü–†–û–ü–£–°–¢–ò–¢–¨
                </button>
            </div>
        </div>
    </div>

    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
    <div id="main-menu-screen" class="screen bg-dark">
        <div class="top-bar">
            <span class="title" style="font-size: 20px;">Derevna24/2</span>
            <div id="user-info" class="small-text"></div>
        </div>
        
        <div class="scroll-container">
            <h2 class="header text-white">–ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ</h2>
            
            <div class="list">
                <button class="list-item btn bg-primary" onclick="showSection('games')">
                    üéÆ –ú–ò–ù–ò-–ò–ì–†–´
                </button>
                
                <button class="list-item btn bg-secondary" onclick="showSection('jobs')">
                    üíº –†–ê–ë–û–¢–ê
                </button>
                
                <button class="list-item btn bg-accent" onclick="showNewsSection()">
                    üì∞ –ù–û–í–û–°–¢–ò
                    <span id="news-badge" class="badge badge-admin" style="display: none;">0</span>
                </button>
                
                <button class="list-item btn bg-info" onclick="showProfile()">
                    üë§ –ü–†–û–§–ò–õ–¨
                </button>
                
                <button class="list-item btn bg-admin" onclick="showSection('settings')">
                    ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò
                </button>
                
                <button class="list-item btn bg-danger" onclick="logout()" style="margin-top: 30px;">
                    –í–´–ô–¢–ò –ò–ó –°–ò–°–¢–ï–ú–´
                </button>
            </div>
        </div>
    </div>

    <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
    <div id="admin-screen" class="screen bg-dark">
        <div class="top-bar">
            <span class="title" style="font-size: 20px; color: #9B59B6;">–ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨</span>
            <div>
                <button class="btn bg-primary btn-small" onclick="showCreateNewsScreen()">
                    + –ù–æ–≤–æ—Å—Ç—å
                </button>
                <button class="btn bg-danger btn-small" onclick="logout()">
                    ‚Üê –í–´–ô–¢–ò
                </button>
            </div>
        </div>
        
        <div class="scroll-container">
            <div class="card">
                <h3 class="text-white" style="margin-bottom: 20px;">
                    –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: <span id="admin-name"></span>
                    <span class="badge badge-admin">ADMIN</span>
                </h3>
                
                <div class="body-text" style="margin-bottom: 30px;">
                    <p>–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞: <span id="server-status" style="color: #2ECC71;">üü¢ –û–Ω–ª–∞–π–Ω</span></p>
                    <p>–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: <span id="total-users">0</span></p>
                    <p>–í—Å–µ–≥–æ –Ω–æ–≤–æ—Å—Ç–µ–π: <span id="total-news">0</span></p>
                </div>
                
                <button class="btn bg-success" onclick="startServer()">
                    üöÄ –ó–ê–ü–£–°–¢–ò–¢–¨ –°–ï–†–í–ï–†
                </button>
                
                <button class="btn bg-danger" onclick="stopServer()">
                    ‚õî –û–°–¢–ê–ù–û–í–ò–¢–¨ –°–ï–†–í–ï–†
                </button>
                
                <button class="btn bg-warning" onclick="restartServer()">
                    üîÑ –ü–ï–†–ï–ó–ê–ì–†–£–ó–ò–¢–¨ –°–ï–†–í–ï–†
                </button>
                
                <button class="btn bg-info" onclick="manageUsers()">
                    üë• –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø–ú–ò
                </button>
                
                <button class="btn bg-admin" onclick="manageNews()">
                    üì∞ –£–ü–†–ê–í–õ–ï–ù–ò–ï –ù–û–í–û–°–¢–Ø–ú–ò
                </button>
                
                <button class="btn bg-darker" onclick="shutdownSystem()" style="margin-top: 30px;">
                    üíÄ –í–´–ö–õ–Æ–ß–ò–¢–¨ –°–ò–°–¢–ï–ú–£
                </button>
            </div>
        </div>
    </div>

    <!-- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ -->
    <div id="create-news-screen" class="screen bg-dark">
        <div class="top-bar">
            <span class="title" style="font-size: 20px;">–°–û–ó–î–ê–ù–ò–ï –ù–û–í–û–°–¢–ò</span>
            <button class="btn bg-danger btn-small" onclick="showScreen('admin-screen')">
                ‚Üê –ù–ê–ó–ê–î
            </button>
        </div>
        
        <div class="scroll-container">
            <div class="card">
                <div class="input-group">
                    <label class="input-label text-white">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏:</label>
                    <input type="text" id="news-title" class="input-field" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫">
                </div>
                
                <div class="input-group">
                    <label class="input-label text-white">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:</label>
                    <textarea id="news-content" class="input-field" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏..."></textarea>
                </div>
                
                <div class="input-group">
                    <label class="input-label text-white">–¢–∏–ø –Ω–æ–≤–æ—Å—Ç–∏:</label>
                    <select id="news-type" class="input-field">
                        <option value="update">üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ</option>
                        <option value="event">üéâ –°–æ–±—ã—Ç–∏–µ</option>
                        <option value="important">‚ö†Ô∏è –í–∞–∂–Ω–æ–µ</option>
                        <option value="job">üíº –†–∞–±–æ—Ç–∞</option>
                        <option value="system">‚öôÔ∏è –°–∏—Å—Ç–µ–º–Ω–æ–µ</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label class="input-label text-white">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</label>
                    <select id="news-priority" class="input-field">
                        <option value="normal">–û–±—ã—á–Ω—ã–π</option>
                        <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                        <option value="urgent">–°—Ä–æ—á–Ω—ã–π</option>
                    </select>
                </div>
                
                <button class="btn bg-success" onclick="createNews()">
                    üì¢ –û–ü–£–ë–õ–ò–ö–û–í–ê–¢–¨ –ù–û–í–û–°–¢–¨
                </button>
                
                <button class="btn bg-warning" onclick="saveNewsDraft()">
                    üíæ –°–û–•–†–ê–ù–ò–¢–¨ –ß–ï–†–ù–û–í–ò–ö
                </button>
            </div>
        </div>
    </div>

    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç—è–º–∏ -->
    <div id="manage-news-screen" class="screen bg-dark">
        <div class="top-bar">
            <span class="title" style="font-size: 20px;">–£–ü–†–ê–í–õ–ï–ù–ò–ï –ù–û–í–û–°–¢–Ø–ú–ò</span>
            <div>
                <button class="btn bg-success btn-small" onclick="showCreateNewsScreen()">
                    + –ù–æ–≤–∞—è
                </button>
                <button class="btn bg-danger btn-small" onclick="showScreen('admin-screen')">
                    ‚Üê –ù–∞–∑–∞–¥
                </button>
            </div>
        </div>
        
        <div class="scroll-container">
            <h3 class="text-white" style="margin-bottom: 20px;">–í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏ (<span id="all-news-count">0</span>)</h3>
            
            <div id="news-management-list" class="list">
                <!-- –°–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            </div>
        </div>
    </div>

    <!-- –†–∞–∑–¥–µ–ª –Ω–æ–≤–æ—Å—Ç–µ–π -->
    <div id="news-screen" class="screen bg-dark">
        <div class="top-bar">
            <span class="title" style="font-size: 20px;">–ù–û–í–û–°–¢–ò</span>
            <div>
                <button class="btn bg-primary btn-small" onclick="refreshNews()">
                    üîÑ –û–±–Ω–æ–≤–∏—Ç—å
                </button>
                <button class="btn bg-danger btn-small" onclick="showScreen('main-menu-screen')">
                    ‚Üê –ù–∞–∑–∞–¥
                </button>
            </div>
        </div>
        
        <div class="scroll-container">
            <div id="news-filter" style="margin-bottom: 20px;">
                <button class="btn bg-card btn-small" onclick="filterNews('all')">
                    –í—Å–µ
                </button>
                <button class="btn bg-primary btn-small" onclick="filterNews('update')">
                    –û–±–Ω–æ–≤–ª–µ–Ω–∏—è
                </button>
                <button class="btn bg-warning btn-small" onclick="filterNews('event')">
                    –°–æ–±—ã—Ç–∏—è
                </button>
                <button class="btn bg-danger btn-small" onclick="filterNews('important')">
                    –í–∞–∂–Ω—ã–µ
                </button>
                <button class="btn bg-success btn-small" onclick="filterNews('job')">
                    –†–∞–±–æ—Ç–∞
                </button>
            </div>
            
            <div id="news-list" class="list">
                <!-- –°–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>

    <!-- –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–æ–≤–æ—Å—Ç–∏ -->
    <div id="view-news-screen" class="screen bg-dark">
        <div class="top-bar">
            <span class="title" style="font-size: 20px;">–ù–û–í–û–°–¢–¨</span>
            <button class="btn bg-danger btn-small" onclick="showNewsSection()">
                ‚Üê –ù–∞–∑–∞–¥
            </button>
        </div>
        
        <div class="scroll-container">
            <div id="full-news-view" class="card">
                <!-- –ü–æ–ª–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>

    <!-- –†–∞–∑–¥–µ–ª—ã –º–µ–Ω—é -->
    <div id="section-screen" class="screen bg-dark">
        <div class="top-bar">
            <button class="btn bg-danger" onclick="showScreen('main-menu-screen')" style="width: auto; padding: 8px 15px;">
                ‚Üê –ù–ê–ó–ê–î
            </button>
        </div>
        
        <div class="scroll-container">
            <h2 id="section-title" class="header text-white"></h2>
            <div id="section-content" class="list">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Ä–∞–∑–¥–µ–ª–∞ -->
            </div>
        </div>
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script>
        // –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let appData = {
            currentUser: null,
            currentCharacter: null,
            isAdmin: false,
            users: {},
            characters: {},
            news: [],
            serverStatus: 'üü¢ –û–Ω–ª–∞–π–Ω'
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            initVideo();
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
        function loadData() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            const savedUsers = localStorage.getItem('derevna_users');
            if (savedUsers) {
                appData.users = JSON.parse(savedUsers);
            } else {
                // –°–æ–∑–¥–∞–µ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                appData.users = {
                    "Paswa": {
                        password: "181010",
                        is_admin: true,
                        created_at: new Date().toISOString()
                    }
                };
                saveUsers();
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
            const savedChars = localStorage.getItem('derevna_characters');
            if (savedChars) {
                appData.characters = JSON.parse(savedChars);
            } else {
                appData.characters = {};
                saveCharacters();
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏
            const savedNews = localStorage.getItem('derevna_news');
            if (savedNews) {
                appData.news = JSON.parse(savedNews);
            } else {
                // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
                appData.news = [
                    {
                        id: 1,
                        title: "–ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã Derevna24/2",
                        content: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É Derevna24/2! –¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã —É–ª—É—á—à–µ–Ω–Ω–∞—è –≥—Ä–∞—Ñ–∏–∫–∞, –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.",
                        type: "system",
                        priority: "high",
                        author: "Paswa",
                        is_admin: true,
                        created_at: new Date().toISOString(),
                        views: 0,
                        likes: 0
                    },
                    {
                        id: 2,
                        title: "–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ä–∞–±–æ—á–∏–µ –º–µ—Å—Ç–∞",
                        content: "–¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–æ–≤—ã–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏: –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç, –¥–∏–∑–∞–π–Ω–µ—Ä –∏ –º–µ–Ω–µ–¥–∂–µ—Ä. –ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –±–æ–ª—å—à–µ –∏ —Ä–∞–∑–≤–∏–≤–∞–π—Ç–µ—Å—å!",
                        type: "job",
                        priority: "normal",
                        author: "Paswa",
                        is_admin: true,
                        created_at: new Date(Date.now() - 86400000).toISOString(), // –í—á–µ—Ä–∞
                        views: 0,
                        likes: 0
                    },
                    {
                        id: 3,
                        title: "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
                        content: "–£–ª—É—á—à–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º —Å–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –µ—Å–ª–∏ –≤—ã –¥–∞–≤–Ω–æ —ç—Ç–æ–≥–æ –Ω–µ –¥–µ–ª–∞–ª–∏.",
                        type: "important",
                        priority: "high",
                        author: "Paswa",
                        is_admin: true,
                        created_at: new Date(Date.now() - 172800000).toISOString(), // –ü–æ–∑–∞–≤—á–µ—Ä–∞
                        views: 0,
                        likes: 0
                    }
                ];
                saveNews();
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        function saveUsers() {
            localStorage.setItem('derevna_users', JSON.stringify(appData.users));
        }

        function saveCharacters() {
            localStorage.setItem('derevna_characters', JSON.stringify(appData.characters));
        }

        function saveNews() {
            localStorage.setItem('derevna_news', JSON.stringify(appData.news));
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏–¥–µ–æ –∑–∞—Å—Ç–∞–≤–∫–∏
        function initVideo() {
            const video = document.getElementById('splash-video');
            const audio = document.getElementById('splash-audio');
            
            video.play().catch(e => {
                console.log("–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ –Ω–µ —É–¥–∞–ª–æ—Å—å:", e);
                setTimeout(() => video.play(), 100);
            });
            
            setTimeout(() => {
                audio.volume = 0.7;
                audio.play().catch(e => {
                    console.log("–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–∞ –Ω–µ —É–¥–∞–ª–æ—Å—å:", e);
                });
            }, 500);
            
            video.addEventListener('ended', function() {
                setTimeout(() => {
                    document.getElementById('video-container').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('video-container').style.display = 'none';
                        showScreen('activation-screen');
                        audio.pause();
                    }, 300);
                }, 1000);
            });
            
            setTimeout(() => {
                if (video.readyState < 2) {
                    document.getElementById('video-container').style.display = 'none';
                    showScreen('activation-screen');
                }
            }, 5000);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            const screen = document.getElementById(screenId);
            if (screen) {
                screen.classList.add('active');
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
                if (screenId === 'main-menu-screen') {
                    updateUserInfo();
                    updateNewsBadge();
                } else if (screenId === 'admin-screen') {
                    updateAdminInfo();
                } else if (screenId === 'character-screen') {
                    loadCharacters();
                } else if (screenId === 'news-screen') {
                    loadNews();
                } else if (screenId === 'manage-news-screen') {
                    loadNewsManagement();
                }
            }
        }

        // –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
        function activateSystem() {
            const activationScreen = document.getElementById('activation-screen');
            activationScreen.innerHTML = `
                <div class="card" style="background: black; border-color: #00FF00;">
                    <div id="activation-text" style="font-family: monospace; color: #00FF00; font-size: 18px; min-height: 200px;"></div>
                </div>
            `;
            
            const textElement = document.getElementById('activation-text');
            const messages = [
                "–ê–ö–¢–ò–í–ê–¶–ò–Ø –°–ò–°–¢–ï–ú–´...",
                "–ü–†–û–í–ï–†–ö–ê –ö–õ–Æ–ß–ê...",
                "–ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –ö –°–ï–¢–ò...",
                "–ê–ö–¢–ò–í–ê–¶–ò–Ø –£–°–ü–ï–®–ù–ê!",
                "–î–û–ë–†–û –ü–û–ñ–ê–õ–û–í–ê–¢–¨!"
            ];
            
            let index = 0;
            
            function typeMessage() {
                if (index < messages.length) {
                    textElement.textContent = messages[index];
                    index++;
                    setTimeout(typeMessage, 1000);
                } else {
                    setTimeout(() => showScreen('auth-screen'), 1000);
                }
            }
            
            typeMessage();
        }

        // –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
        function login() {
            const login = document.getElementById('login-input').value;
            const password = document.getElementById('password-input').value;
            
            if (!login || !password) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
            if (login === "Paswa" && password === "181010") {
                appData.currentUser = "Paswa";
                appData.isAdmin = true;
                appData.currentCharacter = null;
                showScreen('admin-screen');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            if (appData.users[login]) {
                const user = appData.users[login];
                
                if (user.password === password) {
                    appData.currentUser = login;
                    appData.isAdmin = user.is_admin || false;
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏
                    if (appData.characters[login] && Object.keys(appData.characters[login]).length > 0) {
                        showScreen('character-screen');
                    } else {
                        showScreen('create-character-screen');
                    }
                    return;
                }
            }
            
            alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å!');
        }

        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
        function register() {
            const login = document.getElementById('reg-login-input').value;
            const password = document.getElementById('reg-password-input').value;
            
            if (!login || !password) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }
            
            if (appData.users[login]) {
                alert('–õ–æ–≥–∏–Ω —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!');
                return;
            }
            
            if (login === "Paswa") {
                alert('–≠—Ç–æ—Ç –ª–æ–≥–∏–Ω –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω!');
                return;
            }
            
            appData.users[login] = {
                password: password,
                is_admin: false,
                created_at: new Date().toISOString()
            };
            
            saveUsers();
            
            appData.currentUser = login;
            appData.isAdmin = false;
            
            alert('–ê–∫–∫–∞—É–Ω—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!');
            showScreen('create-character-screen');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
        function loadCharacters() {
            const container = document.getElementById('characters-list');
            const userChars = appData.characters[appData.currentUser] || {};
            
            if (Object.keys(userChars).length === 0) {
                container.innerHTML = `
                    <div class="card" style="text-align: center;">
                        <p class="body-text">–£ –≤–∞—Å –Ω–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π!</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            for (const charName in userChars) {
                const char = userChars[charName];
                html += `
                    <div class="list-item">
                        <div>
                            <strong>${char.first_name} ${char.last_name}</strong><br>
                            <span class="small-text">${char.age} –ª–µ—Ç, ${char.city}</span>
                        </div>
                        <button class="btn bg-primary btn-small" onclick="selectCharacter('${charName}')">
                            –í—ã–±—Ä–∞—Ç—å
                        </button>
                    </div>
                `;
            }
            
            container.innerHTML = html;
        }

        // –í—ã–±–æ—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
        function selectCharacter(charName) {
            appData.currentCharacter = charName;
            const char = appData.characters[appData.currentUser][charName];
            alert(`–í—ã–±—Ä–∞–Ω –ø–µ—Ä—Å–æ–Ω–∞–∂: ${char.first_name} ${char.last_name}`);
            showScreen('main-menu-screen');
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
        function createCharacter() {
            const firstName = document.getElementById('char-firstname').value;
            const lastName = document.getElementById('char-lastname').value;
            const age = parseInt(document.getElementById('char-age').value);
            const city = document.getElementById('char-city').value;
            const country = document.getElementById('char-country').value;
            
            if (!firstName || !lastName || !age) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è!');
                return;
            }
            
            if (age < 1 || age > 120 || isNaN(age)) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç!');
                return;
            }
            
            const charName = `${firstName}_${lastName}`;
            
            if (!appData.characters[appData.currentUser]) {
                appData.characters[appData.currentUser] = {};
            }
            
            appData.characters[appData.currentUser][charName] = {
                first_name: firstName,
                last_name: lastName,
                age: age,
                city: city || "–ù–µ —É–∫–∞–∑–∞–Ω–æ",
                country: country || "–ù–µ —É–∫–∞–∑–∞–Ω–æ",
                created_at: new Date().toISOString(),
                level: 1,
                money: 1000
            };
            
            saveCharacters();
            
            appData.currentCharacter = charName;
            alert(`–ü–µ—Ä—Å–æ–Ω–∞–∂ ${firstName} ${lastName} —Å–æ–∑–¥–∞–Ω!`);
            showScreen('main-menu-screen');
        }

        // –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
        function skipCharacter() {
            appData.currentCharacter = null;
            showScreen('main-menu-screen');
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        function updateUserInfo() {
            const userInfo = document.getElementById('user-info');
            if (appData.currentUser && appData.currentCharacter) {
                const char = appData.characters[appData.currentUser][appData.currentCharacter];
                userInfo.textContent = `${char.first_name} ${char.last_name} | –£—Ä. ${char.level}`;
            } else if (appData.currentUser) {
                userInfo.textContent = appData.currentUser;
            } else {
                userInfo.textContent = '';
            }
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –±–µ–π–¥–∂ –Ω–æ–≤–æ—Å—Ç–µ–π
        function updateNewsBadge() {
            const badge = document.getElementById('news-badge');
            if (appData.news.length > 0) {
                badge.textContent = appData.news.length;
                badge.style.display = 'inline-block';
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–æ–≤—ã–µ –≤–∞–∂–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
                const newImportantNews = appData.news.filter(news => 
                    news.priority === 'urgent' && 
                    !news.viewed_by || 
                    !news.viewed_by.includes(appData.currentUser)
                );
                
                if (newImportantNews.length > 0) {
                    badge.style.backgroundColor = '#E74C3C';
                }
            } else {
                badge.style.display = 'none';
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
        function showProfile() {
            if (appData.currentUser && appData.currentCharacter) {
                const char = appData.characters[appData.currentUser][appData.currentCharacter];
                const profile = `
–ò–º—è: ${char.first_name}
–§–∞–º–∏–ª–∏—è: ${char.last_name}
–í–æ–∑—Ä–∞—Å—Ç: ${char.age}
–ì–æ—Ä–æ–¥: ${char.city}
–°—Ç—Ä–∞–Ω–∞: ${char.country}
–£—Ä–æ–≤–µ–Ω—å: ${char.level}
–î–µ–Ω—å–≥–∏: ${char.money} –º–æ–Ω–µ—Ç
–°—Ç–∞—Ç—É—Å: ${appData.isAdmin ? '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' : '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'}
–°–æ–∑–¥–∞–Ω: ${new Date(char.created_at).toLocaleDateString()}
                `;
                alert(profile);
            } else {
                alert('–ü–µ—Ä—Å–æ–Ω–∞–∂ –Ω–µ –≤—ã–±—Ä–∞–Ω');
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏
        function showNewsSection() {
            showScreen('news-screen');
        }

        // –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤–æ—Å—Ç–∏
        function loadNews(filterType = 'all') {
            const container = document.getElementById('news-list');
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞)
            const sortedNews = [...appData.news].sort((a, b) => 
                new Date(b.created_at) - new Date(a.created_at)
            );
            
            // –§–∏–ª—å—Ç—Ä—É–µ–º –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
            const filteredNews = filterType === 'all' 
                ? sortedNews 
                : sortedNews.filter(news => news.type === filterType);
            
            if (filteredNews.length === 0) {
                container.innerHTML = `
                    <div class="card" style="text-align: center;">
                        <p class="body-text">–ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            filteredNews.forEach(news => {
                const date = new Date(news.created_at);
                const tagClass = `tag-${news.type}`;
                const tagText = getTagText(news.type);
                
                html += `
                    <div class="news-card ${news.is_admin ? 'admin' : ''}" onclick="viewNews(${news.id})">
                        <div class="news-header">
                            <div class="news-title">${news.title}</div>
                            <div class="news-date">${formatDate(date)}</div>
                        </div>
                        <div class="news-content">
                            ${news.content.length > 100 ? news.content.substring(0, 100) + '...' : news.content}
                        </div>
                        <div>
                            <span class="news-tag ${tagClass}">${tagText}</span>
                            ${news.priority === 'urgent' ? '<span class="news-tag tag-important">–°–†–û–ß–ù–û</span>' : ''}
                            ${news.priority === 'high' ? '<span class="news-tag tag-important">–í–ê–ñ–ù–û</span>' : ''}
                        </div>
                        <div class="news-author ${news.is_admin ? 'admin' : ''}">
                            üìù ${news.author} ${news.is_admin ? 'üëë' : ''}
                            <span style="float: right;">üëÅÔ∏è ${news.views || 0} ‚ù§Ô∏è ${news.likes || 0}</span>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π
        function filterNews(type) {
            loadNews(type);
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç–∏
        function refreshNews() {
            loadNews('all');
        }

        // –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª–Ω–æ–π –Ω–æ–≤–æ—Å—Ç–∏
        function viewNews(newsId) {
            const news = appData.news.find(n => n.id === newsId);
            if (!news) return;
            
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
            if (!news.views) news.views = 0;
            news.views++;
            
            // –û—Ç–º–µ—á–∞–µ–º –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—É—é –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            if (!news.viewed_by) news.viewed_by = [];
            if (!news.viewed_by.includes(appData.currentUser)) {
                news.viewed_by.push(appData.currentUser);
            }
            
            saveNews();
            
            const container = document.getElementById('full-news-view');
            const date = new Date(news.created_at);
            const tagClass = `tag-${news.type}`;
            const tagText = getTagText(news.type);
            
            container.innerHTML = `
                <div class="news-header" style="margin-bottom: 20px;">
                    <div class="title" style="font-size: 22px;">${news.title}</div>
                    <div class="news-date">${formatDate(date)}</div>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <span class="news-tag ${tagClass}">${tagText}</span>
                    ${news.priority === 'urgent' ? '<span class="news-tag tag-important">–°–†–û–ß–ù–û</span>' : ''}
                    ${news.priority === 'high' ? '<span class="news-tag tag-important">–í–ê–ñ–ù–û</span>' : ''}
                </div>
                
                <div class="news-content" style="font-size: 16px; line-height: 1.8; margin-bottom: 30px;">
                    ${news.content.replace(/\n/g, '<br>')}
                </div>
                
                <div class="news-author ${news.is_admin ? 'admin' : ''}" style="margin-bottom: 20px;">
                    <strong>–ê–≤—Ç–æ—Ä:</strong> ${news.author} ${news.is_admin ? '<span class="badge badge-admin">ADMIN</span>' : ''}
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div>
                        <span style="margin-right: 15px;">üëÅÔ∏è ${news.views} –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</span>
                        <span>‚ù§Ô∏è ${news.likes || 0} –ª–∞–π–∫–æ–≤</span>
                    </div>
                    ${appData.currentUser === news.author || appData.isAdmin ? `
                    <div>
                        <button class="btn bg-warning btn-small" onclick="editNews(${news.id})">
                            ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                        <button class="btn bg-danger btn-small" onclick="deleteNews(${news.id})">
                            üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </div>
                    ` : ''}
                </div>
                
                ${!news.liked_by || !news.liked_by.includes(appData.currentUser) ? `
                <button class="btn bg-success" onclick="likeNews(${news.id})">
                    ‚ù§Ô∏è –ü–æ—Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫
                </button>
                ` : `
                <button class="btn bg-gray" onclick="unlikeNews(${news.id})">
                    üíî –£–±—Ä–∞—Ç—å –ª–∞–π–∫
                </button>
                `}
            `;
            
            showScreen('view-news-screen');
        }

        // –õ–∞–π–∫ –Ω–æ–≤–æ—Å—Ç–∏
        function likeNews(newsId) {
            const news = appData.news.find(n => n.id === newsId);
            if (!news) return;
            
            if (!news.likes) news.likes = 0;
            if (!news.liked_by) news.liked_by = [];
            
            if (!news.liked_by.includes(appData.currentUser)) {
                news.likes++;
                news.liked_by.push(appData.currentUser);
                saveNews();
                viewNews(newsId); // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–¥
            }
        }

        // –£–±—Ä–∞—Ç—å –ª–∞–π–∫
        function unlikeNews(newsId) {
            const news = appData.news.find(n => n.id === newsId);
            if (!news || !news.liked_by) return;
            
            const index = news.liked_by.indexOf(appData.currentUser);
            if (index > -1) {
                news.likes--;
                news.liked_by.splice(index, 1);
                saveNews();
                viewNews(newsId);
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏
        function showCreateNewsScreen() {
            // –û—á–∏—â–∞–µ–º –ø–æ–ª—è
            document.getElementById('news-title').value = '';
            document.getElementById('news-content').value = '';
            document.getElementById('news-type').value = 'update';
            document.getElementById('news-priority').value = 'normal';
            
            showScreen('create-news-screen');
        }

        // –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å
        function createNews() {
            const title = document.getElementById('news-title').value.trim();
            const content = document.getElementById('news-content').value.trim();
            const type = document.getElementById('news-type').value;
            const priority = document.getElementById('news-priority').value;
            
            if (!title || !content) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ!');
                return;
            }
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID
            const newId = appData.news.length > 0 
                ? Math.max(...appData.news.map(n => n.id)) + 1 
                : 1;
            
            const newNews = {
                id: newId,
                title: title,
                content: content,
                type: type,
                priority: priority,
                author: appData.currentUser,
                is_admin: appData.isAdmin,
                created_at: new Date().toISOString(),
                views: 0,
                likes: 0,
                liked_by: [],
                viewed_by: []
            };
            
            appData.news.unshift(newNews); // –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ
            saveNews();
            
            alert('–ù–æ–≤–æ—Å—Ç—å —É—Å–ø–µ—à–Ω–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞!');
            showScreen('admin-screen');
        }

        // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫
        function saveNewsDraft() {
            const draft = {
                title: document.getElementById('news-title').value,
                content: document.getElementById('news-content').value,
                type: document.getElementById('news-type').value,
                priority: document.getElementById('news-priority').value,
                saved_at: new Date().toISOString()
            };
            
            localStorage.setItem('derevna_news_draft', JSON.stringify(draft));
            alert('–ß–µ—Ä–Ω–æ–≤–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç—è–º–∏
        function manageNews() {
            showScreen('manage-news-screen');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç—è–º–∏
        function loadNewsManagement() {
            const container = document.getElementById('news-management-list');
            const countElement = document.getElementById('all-news-count');
            
            countElement.textContent = appData.news.length;
            
            if (appData.news.length === 0) {
                container.innerHTML = `
                    <div class="card" style="text-align: center;">
                        <p class="body-text">–ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            appData.news.forEach(news => {
                const date = new Date(news.created_at);
                const tagClass = `tag-${news.type}`;
                const tagText = getTagText(news.type);
                
                html += `
                    <div class="list-item">
                        <div style="flex: 1;">
                            <div style="font-weight: bold; margin-bottom: 5px;">${news.title}</div>
                            <div class="small-text">
                                <span class="${tagClass}" style="padding: 2px 5px; border-radius: 3px; font-size: 10px;">${tagText}</span>
                                ‚Ä¢ ${formatDate(date)} ‚Ä¢ üëÅÔ∏è ${news.views} ‚Ä¢ ‚ù§Ô∏è ${news.likes}
                            </div>
                            <div class="small-text">–ê–≤—Ç–æ—Ä: ${news.author} ${news.is_admin ? 'üëë' : ''}</div>
                        </div>
                        <div>
                            <button class="btn bg-warning btn-small" onclick="editNews(${news.id})">
                                ‚úèÔ∏è
                            </button>
                            <button class="btn bg-danger btn-small" onclick="deleteNews(${news.id})">
                                üóëÔ∏è
                            </button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å
        function editNews(newsId) {
            const news = appData.news.find(n => n.id === newsId);
            if (!news) return;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞
            if (news.author !== appData.currentUser && !appData.isAdmin) {
                alert('–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —ç—Ç–æ–π –Ω–æ–≤–æ—Å—Ç–∏!');
                return;
            }
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É
            document.getElementById('news-title').value = news.title;
            document.getElementById('news-content').value = news.content;
            document.getElementById('news-type').value = news.type;
            document.getElementById('news-priority').value = news.priority;
            
            // –ú–µ–Ω—è–µ–º –∫–Ω–æ–ø–∫—É
            const form = document.querySelector('#create-news-screen .card');
            form.innerHTML = `
                <h3 class="text-white" style="margin-bottom: 20px;">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏</h3>
                
                <div class="input-group">
                    <label class="input-label text-white">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏:</label>
                    <input type="text" id="edit-news-title" class="input-field" value="${news.title}">
                </div>
                
                <div class="input-group">
                    <label class="input-label text-white">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:</label>
                    <textarea id="edit-news-content" class="input-field">${news.content}</textarea>
                </div>
                
                <div class="input-group">
                    <label class="input-label text-white">–¢–∏–ø –Ω–æ–≤–æ—Å—Ç–∏:</label>
                    <select id="edit-news-type" class="input-field">
                        <option value="update" ${news.type === 'update' ? 'selected' : ''}>üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ</option>
                        <option value="event" ${news.type === 'event' ? 'selected' : ''}>üéâ –°–æ–±—ã—Ç–∏–µ</option>
                        <option value="important" ${news.type === 'important' ? 'selected' : ''}>‚ö†Ô∏è –í–∞–∂–Ω–æ–µ</option>
                        <option value="job" ${news.type === 'job' ? 'selected' : ''}>üíº –†–∞–±–æ—Ç–∞</option>
                        <option value="system" ${news.type === 'system' ? 'selected' : ''}>‚öôÔ∏è –°–∏—Å—Ç–µ–º–Ω–æ–µ</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label class="input-label text-white">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</label>
                    <select id="edit-news-priority" class="input-field">
                        <option value="normal" ${news.priority === 'normal' ? 'selected' : ''}>–û–±—ã—á–Ω—ã–π</option>
                        <option value="high" ${news.priority === 'high' ? 'selected' : ''}>–í—ã—Å–æ–∫–∏–π</option>
                        <option value="urgent" ${news.priority === 'urgent' ? 'selected' : ''}>–°—Ä–æ—á–Ω—ã–π</option>
                    </select>
                </div>
                
                <button class="btn bg-success" onclick="updateNews(${news.id})">
                    üíæ –°–û–•–†–ê–ù–ò–¢–¨ –ò–ó–ú–ï–ù–ï–ù–ò–Ø
                </button>
                
                <button class="btn bg-danger" onclick="showCreateNewsScreen()">
                    ‚ùå –û–¢–ú–ï–ù–ò–¢–¨
                </button>
            `;
            
            showScreen('create-news-screen');
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å
        function updateNews(newsId) {
            const news = appData.news.find(n => n.id === newsId);
            if (!news) return;
            
            const title = document.getElementById('edit-news-title').value.trim();
            const content = document.getElementById('edit-news-content').value.trim();
            const type = document.getElementById('edit-news-type').value;
            const priority = document.getElementById('edit-news-priority').value;
            
            if (!title || !content) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ!');
                return;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–æ–≤–æ—Å—Ç—å
            news.title = title;
            news.content = content;
            news.type = type;
            news.priority = priority;
            news.updated_at = new Date().toISOString();
            
            saveNews();
            alert('–ù–æ–≤–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∞!');
            showScreen('manage-news-screen');
        }

        // –£–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å
        function deleteNews(newsId) {
            if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –Ω–æ–≤–æ—Å—Ç—å?')) return;
            
            const index = appData.news.findIndex(n => n.id === newsId);
            if (index > -1) {
                const news = appData.news[index];
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞
                if (news.author !== appData.currentUser && !appData.isAdmin) {
                    alert('–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —ç—Ç–æ–π –Ω–æ–≤–æ—Å—Ç–∏!');
                    return;
                }
                
                appData.news.splice(index, 1);
                saveNews();
                alert('–ù–æ–≤–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∞!');
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫
                if (document.getElementById('manage-news-screen').classList.contains('active')) {
                    loadNewsManagement();
                } else if (document.getElementById('news-screen').classList.contains('active')) {
                    loadNews();
                }
            }
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
        function manageUsers() {
            alert('–†–∞–∑–¥–µ–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∞–¥–º–∏–Ω–∞
        function updateAdminInfo() {
            document.getElementById('admin-name').textContent = appData.currentUser;
            document.getElementById('total-users').textContent = Object.keys(appData.users).length;
            document.getElementById('total-news').textContent = appData.news.length;
            updateServerStatus();
        }

        // –ê–¥–º–∏–Ω —Ñ—É–Ω–∫—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞
        function updateServerStatus() {
            document.getElementById('server-status').textContent = appData.serverStatus;
            const statusEl = document.getElementById('server-status');
            
            if (appData.serverStatus.includes('üü¢')) {
                statusEl.style.color = '#2ECC71';
            } else if (appData.serverStatus.includes('üî¥')) {
                statusEl.style.color = '#E74C3C';
            } else if (appData.serverStatus.includes('üü°')) {
                statusEl.style.color = '#F39C12';
            }
        }

        function startServer() {
            appData.serverStatus = 'üü¢ –û–Ω–ª–∞–π–Ω';
            updateServerStatus();
            alert('–°–µ—Ä–≤–µ—Ä —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!');
        }

        function stopServer() {
            appData.serverStatus = 'üî¥ –û—Ñ–ª–∞–π–Ω';
            updateServerStatus();
            alert('–°–µ—Ä–≤–µ—Ä —É—Å–ø–µ—à–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!');
        }

        function restartServer() {
            appData.serverStatus = 'üü° –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞...';
            updateServerStatus();
            
            setTimeout(() => {
                appData.serverStatus = 'üü¢ –û–Ω–ª–∞–π–Ω';
                updateServerStatus();
                alert('–°–µ—Ä–≤–µ—Ä —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω!');
            }, 2000);
        }

        // –í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
        function logout() {
            appData.currentUser = null;
            appData.currentCharacter = null;
            appData.isAdmin = false;
            showScreen('auth-screen');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞–∑–¥–µ–ª
        function showSection(section) {
            const title = document.getElementById('section-title');
            const content = document.getElementById('section-content');
            
            let sectionTitle = '';
            let items = [];
            
            switch(section) {
                case 'games':
                    sectionTitle = 'üéÆ –ú–ò–ù–ò-–ò–ì–†–´';
                    items = ['–ê—Ä–∫–∞–¥—ã', '–ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∏', '–°—Ç—Ä–∞—Ç–µ–≥–∏–∏', '–ì–æ–Ω–∫–∏', '–°–ø–æ—Ä—Ç'];
                    break;
                case 'jobs':
                    sectionTitle = 'üíº –†–ê–ë–û–¢–ê';
                    items = ['–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç', '–î–∏–∑–∞–π–Ω–µ—Ä', '–ú–µ–Ω–µ–¥–∂–µ—Ä', '–í–æ–¥–∏—Ç–µ–ª—å', '–ü–æ–≤–∞—Ä'];
                    break;
                case 'settings':
                    sectionTitle = '‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò';
                    items = ['–ó–≤—É–∫', '–ì—Ä–∞—Ñ–∏–∫–∞', '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ', '–Ø–∑—ã–∫', '–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å'];
                    break;
            }
            
            title.textContent = sectionTitle;
            
            let html = '';
            items.forEach(item => {
                html += `
                    <button class="list-item btn bg-card" onclick="alert('–†–∞–∑–¥–µ–ª \\'${item}\\' –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ')">
                        ${item}
                    </button>
                `;
            });
            
            content.innerHTML = html;
            showScreen('section-screen');
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function getTagText(type) {
            switch(type) {
                case 'update': return 'üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ';
                case 'event': return 'üéâ –°–æ–±—ã—Ç–∏–µ';
                case 'important': return '‚ö†Ô∏è –í–∞–∂–Ω–æ–µ';
                case 'job': return 'üíº –†–∞–±–æ—Ç–∞';
                case 'system': return '‚öôÔ∏è –°–∏—Å—Ç–µ–º–Ω–æ–µ';
                default: return 'üì∞ –ù–æ–≤–æ—Å—Ç—å';
            }
        }

        function formatDate(date) {
            const now = new Date();
            const diff = now - date;
            
            if (diff < 60000) return '—Ç–æ–ª—å–∫–æ —á—Ç–æ';
            if (diff < 3600000) return `${Math.floor(diff / 60000)} –º–∏–Ω –Ω–∞–∑–∞–¥`;
            if (diff < 86400000) return `${Math.floor(diff / 3600000)} —á –Ω–∞–∑–∞–¥`;
            if (diff < 604800000) return `${Math.floor(diff / 86400000)} –¥–Ω –Ω–∞–∑–∞–¥`;
            
            return date.toLocaleDateString('ru-RU', {
                day: 'numeric',
                month: 'long',
                year: 'numeric'
            });
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º
        window.addEventListener('beforeunload', function() {
            saveUsers();
            saveCharacters();
            saveNews();
        });
    </script>
</body>
</html>
